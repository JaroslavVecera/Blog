@using Blog.Models;
@using Microsoft.AspNetCore.Authorization;
@model BlogsModel
@inject IAuthorizationService Authorization
@{
    ViewData["Title"] = "Home";
}

<div class="row">
    @foreach (var blog in Model.Blogs)
    {
    <section>
        <h4><a asp-controller="Blog" asp-action="Index" asp-route-id="@blog.Id">@blog.Title</a></h4>
        <a asp-controller="Profile" asp-action="Index" asp-route-id="@blog.Author.Id">@blog.Author.FirstName @blog.Author.LastName</a>
        @if (User.Identity.IsAuthenticated && (await Authorization.AuthorizeAsync(User, blog, Operations.Modify)).Succeeded)
        {
            <a asp-controller="Blog" asp-action="Edit" asp-route-id="@blog.Id">edit</a>
        }
    </section>
    }
</div>
